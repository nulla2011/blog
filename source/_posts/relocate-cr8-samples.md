---
title: 文件移动之后，如何重新定位 Waves CR8 Sampler 的采样
date: 2024-10-29 19:22:55
tags: 
  - vst
  - 编曲
---

![](https://img30.360buyimg.com/ddimgp/jfs/t20271029/238303/11/23409/40580/6720de84Faf35ed13/c499a1979e416f25.png)

移动了工程文件夹（里面有用到的采样）之后 [Waves CR8 Sampler](https://www.waves.com/plugins/cr8-creative-sampler) 都找不到采样了，然而在插件里面重新定位采样之后很多参数都丢失了。不得已研究了一下怎样才能完美复原

<!-- more -->

# Reaper

在 Reaper 中的解决方法比较简单。只需以下四步：

1. 在工程里新建一轨，添加乐器 CR8
2. 将需要重新定位的采样之一拖进 CR8
3. 在 Reaper 中新开一个标签页，关闭工程（这步的目的是保证 Reaper 不关闭）
4. 重新打开工程，如果有其它文件夹的采样需要修复就重复从 1 到 4 的步骤（这里未经测试）

# 通用做法

- 将需要重新定位采样的 CR8 导出 vst3 预设（.vstpreset）

- 使用十六进制编辑器打开预设文件，定位到记录采样路径的位置（使用 `Data` 标签包裹的 CDATA 区段），记住路径占用的字节长度

![](https://img30.360buyimg.com/ddimgp/jfs/t20271029/178832/28/50450/26315/6720e3c0F163197ea/52bccfd3d08aaeaf.png)

- 修改路径，将此时的路径长度与原先的做减法，得到偏差量。在这里就是 `19 - 2D = -14`（以下均使用十六进制方便计算）

![](https://img30.360buyimg.com/ddimgp/jfs/t20271029/237488/4/27142/22685/6720e981Ffc9bc57e/ac8e2a01f6359e9c.png)

- 将第 27+28，32+33，46+47 位组成的值（大端序）还有倒数 0F+10 位（Info 后面两位），倒数 23+24 位（Cont 后面两位），倒数 2F+30 位（Comp0 后面非零的两位）组成的值（小端序）分别加上偏移量

![开头部分](https://img30.360buyimg.com/ddimgp/jfs/t20271029/166711/10/50076/18148/6720f10aF208f4a23/97d913436b1f1d20.png)

![结尾部分](https://img30.360buyimg.com/ddimgp/jfs/t20271029/208637/38/46012/18131/6720f176F8c2a9c38/15e0ec74d3c12d4e.png)

- 在当前的 CR8 中导入修改后的预设

这样就修复完成了，未来可能考虑做个脚本，如果有批量修复的需求的话。